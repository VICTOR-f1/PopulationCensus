@using PopulationСensus.Domain.Entities
@model ResidentCatalogViewModel
@{
}
<head>
   <link rel="shortcut icon" href="/favicon.png" type="image/png">
   <link rel="stylesheet" href="/styles/result-census.css">
   <meta name="viewport" content="width=device-width" />
   <title>@ViewBag.Title</title>
</head>
<body>
   <div class="main-content">
      <div class="container">
         </br>
         <div class="main-content-card">
            <div class="row">
               <div class="searchbar">
                  <form method="POST">
                     <label >Поиск:</label>
                     <input name="searchstring" id="input-search" type="text" onchange="submitForm()" />
                  </form>
               </div>
               <table class="table table-striped table-bordered main-content-table">
                  <thead class="table-dark">
                     <tr>
                        <th scope="col">#</th>
                        <th scope="col">ФИО</th>
                        <th id="DataOfBirthTh" scope="col"></th>
                        <th scope="col">Адресс</th> 
                     </tr>
                  </thead>
                  <tbody>
                     @{
                     int i = 0;
                     foreach (User resident in Model.User)
                     {
                     i++;
                     <tr>
                        <td>@i</td>
                        <td>@resident.FullName</td>
                        <td>@resident.DateOfBirth.ToShortDateString()</td>
                        <td class="d-flex justify-content-between">
                           @resident.Address.State @resident.Address.City 
                           @resident.Address.Street @resident.Address.ApartmentNumber @resident.Address.ZipCode
                           @if(@resident.UserAnswersId!=null)
                           {               
                           <form>
                              <div class="d-flex justify-content-end">
                                 <a    asp-action="ViewingUserAnswer"   asp-controller="Census" asp-route-userAnswerId="@resident.UserAnswersId">
                                     <img id="view-icon-image" src="/images/view-icon.png"/>
                                 </a>
                              </div>
                           </form>
                           }                             
                        </td>
                     </tr>
                     }
                     }             
                  </tbody>
               </table>
            </div>
         </div>
      </div>
   </div>
   <script>
      function submitForm() {
          document.querySelector('form').submit();
      }
   </script>
   @if (TempData["Message"] != null)
   {
   <script type="text/javascript">
      window.onload = function () {
          alert('@TempData["Message"]');
      };
   </script>
   }
    <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/js/bootstrap.bundle.min.js"></script>
    <script type="text/javascript"></script>
</body>